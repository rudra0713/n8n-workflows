{
  "name": "Contract Review Automation",
  "nodes": [
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "triggerOn": "specificFolder",
        "folderToWatch": {
          "__rl": true,
          "value": "1f3bJjqrTv6WBmAdID2YTklZliFAb0XuT",
          "mode": "list",
          "cachedResultName": "contracts",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1f3bJjqrTv6WBmAdID2YTklZliFAb0XuT"
        },
        "event": "fileCreated",
        "options": {}
      },
      "type": "n8n-nodes-base.googleDriveTrigger",
      "typeVersion": 1,
      "position": [
        -480,
        -64
      ],
      "id": "5476fc59-7f0a-4120-a3ec-ad259de1d809",
      "name": "Google Drive Trigger",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "EgtIZvDGSy0hwwrS",
          "name": "Google Drive account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "={{ $json.id }}",
          "mode": "id"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -272,
        -64
      ],
      "id": "7bc1ce04-a0e9-4baf-852d-7643a4344bfb",
      "name": "Download file",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "EgtIZvDGSy0hwwrS",
          "name": "Google Drive account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1.1,
      "position": [
        -64,
        -64
      ],
      "id": "890a249a-f2bc-48fc-8775-4e43d1cf9349",
      "name": "Extract from File"
    },
    {
      "parameters": {
        "text": "=SYSTEM INSTRUCTIONS FOR CONTRACT ANALYSIS:\n\nYou are a legal contract analyzer for a law firm. Your job is to review contracts and extract key information while flagging risks.\n\nANALYSIS APPROACH:\n1. Read the entire contract carefully\n2. Extract structured information (parties, dates, money)\n3. Identify concerning terms that could harm the client\n4. Note what standard protections are missing\n5. Provide actionable guidance for the attorney\n\nWHAT MAKES A TERM CONCERNING (RED FLAGS):\n- Unusually long restrictions (e.g., 18-month non-compete)\n- Overly broad scope (e.g., 200-mile radius, all inventions ever)\n- Unfair penalties (e.g., no PTO payout, aggressive clawbacks)\n- One-sided protections (e.g., only one party indemnified)\n- Vague obligations with harsh consequences\n- Terms that may be unenforceable\n- Missing standard protections that create risk\n\nRISK LEVELS:\n- LOW: Standard terms, well-balanced, minimal concerns\n- MEDIUM: Some unusual terms but manageable\n- HIGH: Multiple concerning terms, negotiation strongly recommended\n- CRITICAL: Potentially unenforceable or severely unfair terms\n\nSTANDARD CLAUSES TO CHECK FOR:\n- Indemnification (who protects whom?)\n- Limitation of liability (cap on damages?)\n- Termination terms (notice, penalties)\n- Confidentiality (duration, scope)\n- Dispute resolution (arbitration, jurisdiction)\n- IP ownership (who owns what)\n- Warranties and disclaimers\n- Force majeure (acts of God)\n\nFOR EMPLOYMENT AGREEMENTS, ALSO CHECK:\n- Non-compete (duration, geography)\n- Non-solicitation\n- IP assignment (scope, personal projects)\n- Benefits and PTO\n- Severance terms\n- At-will status\n\nFOR LEASES, ALSO CHECK:\n- Rent escalation\n- CAM/additional charges\n- Maintenance responsibilities\n- Renewal options\n- Early termination\n- Insurance requirements\n\nFOR SERVICE AGREEMENTS, ALSO CHECK:\n- Scope of services\n- Performance standards\n- Payment terms\n- Deliverables\n- Expense reimbursement\n\nYOUR OUTPUT SHOULD:\n- Be factual and specific (cite actual terms from contract)\n- Focus on business impact, not legal jargon\n- Prioritize issues by severity\n- Give clear action items\n- Be concise - attorneys are busy\n\nATTORNEY NOTES SECTION:\nWrite 2-4 sentences that answer: \"If this attorney only reads one thing about this contract, what should they know?\"\n\nExample attorney_notes:\n\"Standard NDA with typical 3-year term and 5-year confidentiality survival. No unusual restrictions. Low risk, ready to sign.\"\n\n\"Employment agreement contains multiple concerning terms including 18-month non-compete with 200-mile radius, no PTO payout on termination, and aggressive clawback provisions. Strongly recommend negotiation before signing - several terms may be unenforceable.\"\n\n\"Commercial lease with reasonable rent escalation but tenant improvements become landlord property. CAM charges are uncapped. Consider negotiating improvement reimbursement and CAM cap.\"\n\nNow analyze the following contract:\n\n---CONTRACT TEXT---\n{{$json.text}}\n---END CONTRACT---\n\nProvide your analysis in the JSON format specified.",
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"contract_type\": {\n      \"type\": \"string\",\n      \"description\": \"Type of contract (e.g., NDA, Employment Agreement, Lease, Service Agreement)\"\n    },\n    \"parties\": {\n      \"type\": \"array\",\n      \"description\": \"All parties involved in the contract\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"name\": {\"type\": \"string\"},\n          \"role\": {\"type\": \"string\", \"description\": \"e.g., Employer, Tenant, Client, Disclosing Party\"}\n        },\n        \"required\": [\"name\", \"role\"]\n      }\n    },\n    \"key_dates\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"effective_date\": {\"type\": \"string\", \"description\": \"Start date in YYYY-MM-DD format\"},\n        \"end_date\": {\"type\": \"string\", \"description\": \"End date if specified, in YYYY-MM-DD format\"},\n        \"term_length\": {\"type\": \"string\", \"description\": \"Duration in human readable format\"}\n      }\n    },\n    \"financial_summary\": {\n      \"type\": \"object\",\n      \"description\": \"Key financial terms\",\n      \"properties\": {\n        \"primary_amount\": {\"type\": \"string\", \"description\": \"Main payment amount (salary, rent, fee)\"},\n        \"payment_frequency\": {\"type\": \"string\", \"description\": \"How often payment is made\"},\n        \"other_amounts\": {\n          \"type\": \"array\",\n          \"items\": {\"type\": \"string\"},\n          \"description\": \"Bonuses, deposits, penalties, etc.\"\n        }\n      }\n    },\n    \"risk_level\": {\n      \"type\": \"string\",\n      \"enum\": [\"low\", \"medium\", \"high\", \"critical\"],\n      \"description\": \"Overall risk assessment\"\n    },\n    \"red_flags\": {\n      \"type\": \"array\",\n      \"description\": \"Concerning terms that need attorney review\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"issue\": {\"type\": \"string\", \"description\": \"What is concerning\"},\n          \"why_concerning\": {\"type\": \"string\", \"description\": \"Why this matters\"},\n          \"severity\": {\"type\": \"string\", \"enum\": [\"low\", \"medium\", \"high\", \"critical\"]}\n        },\n        \"required\": [\"issue\", \"why_concerning\", \"severity\"]\n      }\n    },\n    \"missing_standard_clauses\": {\n      \"type\": \"array\",\n      \"description\": \"Important protections that are absent\",\n      \"items\": {\"type\": \"string\"}\n    },\n    \"termination_terms\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"notice_required\": {\"type\": \"string\"},\n        \"penalties\": {\"type\": \"string\"},\n        \"special_conditions\": {\"type\": \"string\"}\n      }\n    },\n    \"attorney_notes\": {\n      \"type\": \"string\",\n      \"description\": \"Brief summary for attorney - what they need to know immediately\"\n    },\n    \"requires_negotiation\": {\n      \"type\": \"boolean\",\n      \"description\": \"Should client negotiate terms before signing?\"\n    },\n    \"negotiation_priorities\": {\n      \"type\": \"array\",\n      \"description\": \"If negotiation needed, what to focus on first\",\n      \"items\": {\"type\": \"string\"}\n    }\n  },\n  \"required\": [\n    \"contract_type\",\n    \"parties\",\n    \"risk_level\",\n    \"attorney_notes\",\n    \"requires_negotiation\"\n  ]\n}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.informationExtractor",
      "typeVersion": 1.2,
      "position": [
        144,
        -64
      ],
      "id": "bf20d491-8a19-452c-932f-62e168fec088",
      "name": "Information Extractor"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "responsesApiEnabled": false,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        80,
        144
      ],
      "id": "c674512f-d83e-45be-94b8-cd6c935f9c10",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "jsQVDIaN9o5AoPfd",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1tlWz9XvDGdCUSRtjd86bOBQPLVKsxwfvvaTxisiTMLc",
          "mode": "list",
          "cachedResultName": "Contract Reviews",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1tlWz9XvDGdCUSRtjd86bOBQPLVKsxwfvvaTxisiTMLc/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1tlWz9XvDGdCUSRtjd86bOBQPLVKsxwfvvaTxisiTMLc/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Contract Type": "={{ $json.output.contract_type }}",
            "Parties": "={{ $json.output.parties[0].name }}, {{ $json.output.parties[1].name }}",
            "RISK LEVEL": "={{ $json.output.risk_level }}",
            "Upload Date": "={{ $now.format('yyyy-MM-dd HH:mm') }}",
            "File Name": "={{ $('Download file').item.json.originalFilename }}",
            "Attorney Summary": "={{ $json.output.attorney_notes }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Upload Date",
              "displayName": "Upload Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "File Name",
              "displayName": "File Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Contract Type",
              "displayName": "Contract Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Parties",
              "displayName": "Parties",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "RISK LEVEL",
              "displayName": "RISK LEVEL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Attorney Summary",
              "displayName": "Attorney Summary",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        528,
        96
      ],
      "id": "c12ffe6a-f3a0-4744-94e4-8b2b0711de31",
      "name": "Append row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "J3dN7ZIxeZZLzpbq",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "rudra.ranajee@gmail.com",
        "subject": "={{ $json.risk_level === 'critical' || $json.risk_level === 'high' ? 'ðŸš¨' : $json.risk_level === 'medium' ? 'âš ï¸' : 'âœ“' }} Contract Review:  - {{ $json.output.contract_type }}{{ $json.output.risk_level.toUpperCase() }} RISK",
        "emailType": "text",
        "message": "=New Contract Review Completed\n==============================\n\nDOCUMENT: {{ $('Download file').item.json.name }}\nTYPE: {{ $json.output.contract_type }}\nREVIEWED: {{ $now.format('MMMM dd, yyyy') }} at {{ $now.format('HH:mm') }}\n\nPARTIES:\n--------\n{{ $json.output.parties[0].role }}: {{ $json.output.parties[0].name }}\n{{ $json.output.parties[1] ? $json.output.parties[1].role + ': ' + $json.output.parties[1].name : '' }}\n\nKEY DATES:\n----------\nEffective Date: {{ $json.output.key_dates.effective_date || 'Not specified' }}\n{{ $json.output.key_dates.end_date ? 'End Date: ' + $json.output.key_dates.end_date : '' }}\nTerm: {{ $json.output.key_dates.term_length || 'Not specified' }}\n\nFINANCIAL TERMS:\n----------------\n{{ $json.output.financial_summary.primary_amount ? 'Primary Amount: ' + $json.output.financial_summary.primary_amount : 'No payment terms' }}\n{{ $json.output.financial_summary.payment_frequency ? 'Payment Frequency: ' + $json.output.financial_summary.payment_frequency : '' }}\n{{ $json.output.financial_summary.other_amounts && $json.output.financial_summary.other_amounts.length > 0 ? '\\nOther Amounts:\\n' + $json.output.financial_summary.other_amounts.map(amt => '  â€¢ ' + amt).join('\\n') : '' }}\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nRISK ASSESSMENT: {{ $json.output.risk_level.toUpperCase() }}\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nATTORNEY SUMMARY:\n{{ $json.output.attorney_notes }}\n\n{{ $json.output.red_flags.length > 0 ? 'âš ï¸ RED FLAGS IDENTIFIED (' + $json.output.red_flags.length + '):\\n' + $json.output.red_flags.map((flag, i) => '\\n' + (i+1) + '. [' + flag.severity.toUpperCase() + '] ' + flag.issue + '\\n   â†’ ' + flag.why_concerning).join('\\n') : 'âœ“ No red flags identified - contract appears standard' }}\n\n{{ $json.output.missing_standard_clauses.length > 0 ? '\\n\\nðŸ“‹ MISSING STANDARD CLAUSES (' + $json.output.missing_standard_clauses.length + '):\\n' + $json.output.missing_standard_clauses.map(clause => '  â€¢ ' + clause).join('\\n') : '' }}\n\n{{ $json.termination_terms && (Object.keys($json.termination_terms).length > 0) ? '\\n\\nðŸ“„ TERMINATION TERMS:\\n' : '' }}{{ $json.output.termination_terms.notice_required ? '  Notice Required: ' + $json.output.termination_terms.notice_required + '\\n' : '' }}{{ $json.output.termination_terms.penalties ? '  Penalties: ' + $json.output.termination_terms.penalties + '\\n' : '' }}{{ $json.output.termination_terms.special_conditions ? '  Special Conditions: ' + $json.output.termination_terms.special_conditions : '' }}\n\n{{ $json.requires_negotiation ? '\\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\\nðŸ” NEGOTIATION RECOMMENDED\\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\\n\\nPriorities:\\n' + $json.negotiation_priorities.map((priority, i) => (i+1) + '. ' + priority).join('\\n') : '\\nâœ“ Contract appears acceptable as-is based on standard market terms.' }}\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nNEXT STEPS:\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n{{ $json.risk_level === 'critical' || $json.risk_level === 'high' ? '1. Review flagged issues immediately\\n2. Consult with client on negotiation strategy\\n3. Prepare redline version with recommended changes' : $json.risk_level === 'medium' ? '1. Review flagged issues with client\\n2. Determine negotiation priorities\\n3. Proceed with standard review process' : '1. Standard review process\\n2. Confirm terms with client\\n3. Proceed to execution' }}",
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        528,
        -192
      ],
      "id": "bd617707-1189-4f93-9ec6-ddbae79fdfb1",
      "name": "Send a message",
      "webhookId": "4ae71e54-7e90-4fcf-8e7a-99f9258e250b",
      "credentials": {
        "gmailOAuth2": {
          "id": "bS8RLvU8G2RlZd9b",
          "name": "Gmail account 2"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Google Drive Trigger": {
      "main": [
        [
          {
            "node": "Download file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download file": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "Information Extractor",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Information Extractor",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Information Extractor": {
      "main": [
        [
          {
            "node": "Send a message",
            "type": "main",
            "index": 0
          },
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a message": {
      "main": [
        []
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "49240418-9f43-4a64-a755-5b27c0288809",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "44e5ec835778a2c48c17221c09095a30c0d8cf2c8183a1da7b0edb205600c0ef"
  },
  "id": "0AUt1c3MfXE3EMqd",
  "tags": []
}